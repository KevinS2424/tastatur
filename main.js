let targetWord = "";
let currentIndex = 0;
let gameActive = false;
let correctSequence = true;

function startGame() {
  if (gameActive) {
    alert("Das Spiel läuft bereits!");
    return;
  }

  targetWord = document.getElementById("targetWord").value.toUpperCase();
  if (targetWord.length === 0) {
    alert("Bitte gib ein Wort ein!");
    return;
  }

  document.getElementById("keyboard").innerHTML = generateKeyboard();
  resetGame();
  gameActive = true;
}

function stopGame() {
  currentIndex = 0;
  correctSequence = true;
  document.querySelectorAll(".key").forEach(key => {
    key.classList.remove("correct");
    key.dataset.count = 0;
    key.innerHTML = key.dataset.key;
  });
  document.getElementById("message").innerHTML = "";
  gameActive = false;
}

document.addEventListener("keydown", checkKeyPress);

function checkKeyPress(event) {
  if (!gameActive) {
    return;
  }

  const pressedKey = event.key.toUpperCase();
  const targetKey = targetWord[currentIndex];

  if (pressedKey === targetKey) {
    incrementKeyCount(pressedKey);
    document.querySelector(`[data-key="${pressedKey}"]`).classList.add("correct");

    currentIndex++;

    if (currentIndex === targetWord.length) {
      showIcon("checkmark");
      // resetGame() nicht hier aufrufen, um das Checkmark anzuzeigen
    }
  } else {
    correctSequence = false;
    showIcon("cross");
    resetGame();
  }
}

// Hilfsfunktion zur Anzeige der Anzahl von aufeinanderfolgenden Tasten
function incrementKeyCount(key) {
  const keyElement = document.querySelector(`[data-key="${key}"]`);
  const count = keyElement.dataset.count || 0;

  keyElement.dataset.count = parseInt(count) + 1;
  keyElement.innerHTML = `${key}<span class="count">${parseInt(count) + 1}</span>`;
}

function showIcon(iconType) {
  const messageDiv = document.getElementById("message");
  messageDiv.innerHTML = getIconSVG(iconType);

  // Nur das grüne Checkmark entfernen, wenn es nicht das Ende der Sequenz ist
  if (iconType === "checkmark" && !correctSequence) {
    setTimeout(() => {
      messageDiv.innerHTML = "";
      resetGame(); // Hier resetGame() aufrufen, um das Checkmark zu entfernen
    }, 1000);
  }
}

function getIconSVG(iconType) {
  if (iconType === "checkmark") {
    // Feuerwerk-SVG anstelle des grünen Häkchens
    return '<svg xmlns="http://www.w3.org/2000/svg" id="_イヤー_1" viewBox="0 0 90.32 85.41"><defs><style>.cls-1{fill:#fab74d;}.cls-2{fill:#00ade9;}.cls-3{fill:#f1852d;}.cls-4{fill:#75ccf4;}.cls-5{opacity:.8;}</style></defs><g class="cls-5"><g><path class="cls-4" d="M3.44,45.68v-1.33l.33,1.33,.5-1.18-.22,1.47s1.06-.7,1.15-.8c.09-.09-.94,1.37-.94,1.37l1.89-.52-1.71,.99,1.69,.37-1.74-.02,.77,1.01-.92-.62,.91,1.95-1.4-1.6v.86l-.34-.92-.69,2.29,.21-2.23-.71,.83,.69-1.23-2.09,1.17,2.11-1.41-2.94,.32,2.76-.57-1.69-.42,1.37,.15-.42-.81,.91,.58-1-2.49,1.33,2.12-.16-.97,.35,.31Z"/><path class="cls-3" d="M85.94,44.75l.02-2.14,.52,2.15,.81-1.91-.36,2.38s1.71-1.14,1.85-1.29c.14-.15-1.52,2.22-1.52,2.22l3.06-.84-2.76,1.6,2.74,.61-2.81-.03,1.24,1.64-1.49-1.01,1.47,3.16-2.26-2.58v1.4l-.54-1.49-1.11,3.7,.34-3.62-1.15,1.34,1.11-2-3.38,1.89,3.43-2.28-4.77,.52,4.46-.92-2.74-.68,2.22,.24-.69-1.32,1.47,.93-1.62-4.03,2.15,3.42-.27-1.57,.57,.5Z"/><path class="cls-4" d="M82.36,55.14v-1.14l.29,1.14,.43-1.02-.19,1.27s.91-.6,.98-.68c.07-.08-.81,1.18-.81,1.18l1.62-.45-1.47,.85,1.45,.32h-1.49l.66,.86-.79-.53,.78,1.67-1.2-1.37v.74l-.29-.79-.59,1.96,.18-1.92-.61,.71,.59-1.06-1.8,1,1.82-1.21-2.53,.28,2.37-.49-1.45-.36,1.18,.13-.36-.7,.78,.49-.86-2.14,1.14,1.82-.14-.84,.3,.27Z"/><path class="cls-3" d="M74.03,8.42l.02-2.14,.53,2.15,.81-1.92-.36,2.38s1.71-1.14,1.85-1.29c.14-.15-1.52,2.22-1.52,2.22l3.06-.84-2.77,1.6,2.75,.61-2.81-.03,1.24,1.64-1.49-1,1.47,3.16-2.26-2.58v1.4l-.54-1.49-1.11,3.7,.34-3.62-1.15,1.34,1.11-2-3.38,1.89,3.43-2.28-4.76,.52,4.46-.92-2.74-.68,2.22,.24-.68-1.32,1.47,.93-1.62-4.03,2.15,3.43-.27-1.57,.57,.5Z"/><path class="cls-1" d="M56.5,76.62l.02-1.72,.42,1.72,.64-1.53-.29,1.91s1.37-.91,1.48-1.03c.11-.12-1.21,1.78-1.21,1.78l2.44-.67-2.21,1.28,2.2,.49-2.25-.02,1,1.31-1.19-.8,1.18,2.53-1.81-2.07v1.12l-.44-1.19-.89,2.96,.27-2.9-.92,1.07,.89-1.6-2.71,1.51,2.75-1.82-3.81,.41,3.57-.73-2.2-.54,1.78,.19-.55-1.05,1.18,.75-1.29-3.23,1.72,2.75-.21-1.26,.46,.4Z"/><path class="cls-1" d="M31.88,75.51v-.73l.19,.73,.27-.65-.12,.81s.58-.39,.63-.44c.05-.05-.52,.76-.52,.76l1.05-.29-.95,.55,.94,.21h-.96l.42,.55-.51-.34,.5,1.08-.77-.88v.48l-.19-.51-.38,1.26,.12-1.24-.39,.46,.38-.68-1.16,.65,1.17-.78-1.63,.18,1.53-.31-.94-.23,.76,.08-.23-.45,.5,.32-.55-1.38,.74,1.17-.09-.54,.2,.17Z"/><path class="cls-1" d="M31.84,49.7v-.54l.14,.54,.2-.48-.09,.6s.43-.29,.47-.33c.04-.03-.39,.56-.39,.56l.77-.21-.7,.41,.7,.15h-.71l.32,.41-.38-.25,.37,.8-.57-.65v.35l-.14-.37-.28,.93,.09-.92-.29,.34,.28-.51-.85,.48,.87-.58-1.21,.13,1.13-.23-.7-.17,.57,.06-.17-.33,.37,.24-.41-1.02,.54,.86-.07-.4,.14,.13Z"/><path class="cls-1" d="M30.81,27.28v-.54l.14,.54,.2-.48-.09,.61s.43-.29,.47-.33c.04-.04-.39,.56-.39,.56l.77-.21-.7,.41,.69,.15h-.71l.32,.41-.37-.26,.37,.8-.57-.65v.35l-.14-.38-.28,.93,.09-.92-.29,.34,.28-.51-.85,.48,.86-.58-1.2,.13,1.13-.23-.7-.17,.56,.06-.17-.33,.37,.24-.41-1.02,.54,.87-.07-.4,.14,.13Z"/><path class="cls-1" d="M51.42,22.55v-.54l.14,.55,.2-.49-.09,.6s.43-.29,.47-.32c.04-.04-.38,.56-.38,.56l.77-.21-.7,.41,.7,.15h-.71l.32,.41-.38-.26,.37,.8-.57-.65v.35l-.14-.38-.28,.93,.09-.91-.29,.34,.28-.51-.86,.48,.87-.58-1.21,.13,1.13-.23-.69-.17,.56,.06-.17-.33,.37,.23-.41-1.02,.54,.87-.07-.4,.15,.13Z"/><path class="cls-2" d="M51.9,37.47v-.54l.14,.54,.2-.49-.09,.61s.43-.29,.47-.33c.03-.04-.39,.56-.39,.56l.77-.21-.7,.4,.7,.16h-.71l.32,.41-.38-.25,.37,.8-.57-.65v.35l-.14-.38-.28,.94,.08-.92-.29,.34,.28-.51-.85,.48,.86-.58-1.2,.13,1.13-.23-.7-.17,.56,.06-.18-.33,.37,.24-.41-1.02,.54,.87-.07-.4,.14,.13Z"/><path class="cls-2" d="M19.26,37.15v-.54l.14,.54,.2-.49-.09,.6s.43-.29,.47-.33c.04-.04-.39,.56-.39,.56l.77-.22-.7,.41,.69,.16h-.71l.31,.41-.38-.25,.37,.8-.57-.65v.35l-.14-.37-.28,.93,.09-.92-.29,.34,.28-.51-.86,.48,.87-.57-1.2,.13,1.13-.23-.69-.17,.56,.06-.17-.33,.37,.23-.41-1.02,.55,.86-.07-.4,.14,.13Z"/><path class="cls-2" d="M19.39,55.65v-.54l.14,.54,.2-.48-.09,.6s.43-.29,.47-.33c.03-.04-.39,.56-.39,.56l.77-.21-.7,.4,.69,.15h-.71l.31,.41-.38-.26,.37,.8-.57-.65v.35l-.14-.38-.28,.94,.09-.92-.29,.34,.28-.5-.86,.48,.87-.58-1.2,.13,1.13-.23-.7-.17,.57,.06-.17-.33,.37,.24-.41-1.02,.54,.87-.07-.4,.14,.13Z"/><path class="cls-2" d="M66.11,42.77v-.54l.14,.54,.2-.48-.09,.6s.43-.29,.47-.33c.04-.04-.38,.56-.38,.56l.77-.22-.7,.41,.69,.15h-.71l.32,.41-.38-.25,.37,.8-.57-.65v.35l-.14-.38-.28,.93,.09-.92-.29,.34,.28-.5-.85,.48,.87-.58-1.21,.13,1.13-.23-.7-.17,.56,.06-.17-.33,.37,.24-.41-1.02,.54,.86-.07-.4,.14,.13Z"/><path class="cls-2" d="M16.01,69v-1.08l.27,1.09,.41-.97-.18,1.2s.86-.57,.93-.65c.07-.07-.77,1.12-.77,1.12l1.54-.43-1.4,.81,1.38,.31h-1.41l.63,.82-.75-.51,.74,1.59-1.14-1.3v.7l-.27-.75-.56,1.87,.17-1.83-.58,.68,.56-1.01-1.71,.96,1.73-1.15-2.4,.26,2.25-.46-1.38-.34,1.12,.12-.34-.66,.74,.47-.82-2.03,1.08,1.73-.13-.79,.29,.25Z"/><path class="cls-3" d="M18.44,11.38l.02-1.51,.37,1.52,.57-1.35-.26,1.68s1.21-.8,1.31-.91c.1-.11-1.07,1.57-1.07,1.57l2.16-.59-1.95,1.13,1.94,.43-1.98-.02,.88,1.16-1.05-.71,1.04,2.23-1.59-1.83v.99l-.39-1.05-.79,2.61,.24-2.56-.81,.95,.79-1.41-2.39,1.33,2.42-1.61-3.36,.37,3.15-.65-1.94-.48,1.57,.17-.49-.93,1.04,.66-1.14-2.85,1.51,2.42-.19-1.11,.4,.35Z"/><path class="cls-2" d="M69.25,17.92l.02-1.55,.38,1.55,.58-1.38-.26,1.72s1.24-.82,1.34-.93c.1-.11-1.1,1.61-1.1,1.61l2.21-.61-2,1.16,1.98,.44-2.03-.02,.9,1.18-1.08-.72,1.06,2.28-1.63-1.87v1.01l-.39-1.07-.8,2.67,.25-2.61-.83,.97,.8-1.44-2.44,1.36,2.48-1.65-3.44,.37,3.22-.66-1.98-.49,1.61,.17-.5-.95,1.06,.67-1.17-2.91,1.55,2.47-.19-1.14,.41,.36Z"/></g><g><path class="cls-4" d="M55.23,31.29c-1.18-.32-2.4,.16-3.45,.71-1.19,.62-2.7,1.66-3.54,2.72-1.62,2.06-3.05,4.45-3.84,6.94,0,.01,.01,.01,.02,0,.98-2.32,2.42-4.26,4.54-5.67,1.02-.68,2.02-1.41,3.06-2.04,1.04-.63,2.3-.74,3.22-1.57,.27-.25,.52-.95-.01-1.09Z"/><path class="cls-3" d="M63.75,20.6c-.8-.8-1.8-.71-2.86-.34-1.04,.35-2.13,.78-3.05,1.4-1.84,1.24-3.61,2.54-5.12,4.17-1.4,1.51-2.82,3.07-3.98,4.77-1.18,1.73-2.05,3.53-3.04,5.36-.02,.05,.04,.06,.06,.02,.48-.75,.89-1.54,1.39-2.29,.57-.85,1.29-1.6,1.99-2.34,2.97-3.2,6.37-5.28,10.45-6.79,1.07-.4,6.24-1.88,4.17-3.97Z"/><path class="cls-3" d="M55.5,8.67c-2.29,.03-4.18,2.32-5.44,3.99-1.47,1.95-2.22,4.18-2.85,6.52-1.22,4.57-2.26,9.3-1.97,14.05,0,.04,.05,.02,.05-.01,.34-4.64,2.05-9.08,4.07-13.23,.9-1.87,1.96-3.63,3.27-5.25,1.24-1.54,3.12-2.83,3.74-4.77,.18-.56-.22-1.31-.86-1.3Z"/><path class="cls-2" d="M64.83,12.44c-1.12-1.05-2.74-.31-3.88,.3-1.48,.78-2.78,1.76-3.96,2.95-.98,.99-1.83,2.12-2.61,3.28-.36,.54-.69,1.12-1.01,1.69-.32,.57-.79,1.05-1.04,1.65-.02,.06,.05,.08,.08,.03,.59-.95,1.79-1.93,2.68-2.58,1.01-.75,2.1-1.46,3.2-2.07,1.16-.65,2.35-1.28,3.55-1.84,1.24-.58,2.46-.92,3.18-2.19,.22-.39,.15-.89-.18-1.2Z"/><path class="cls-2" d="M80.06,25.06c-1.48-1.43-3.35-1.52-5.31-1.51-2.15,.02-4.45,.45-6.52,.99-2.07,.55-4.1,1.51-6.05,2.4-.67,.3-1.32,.63-1.96,.98-.07,.05-.14,.1-.22,.15-.37,.28-.75,.56-1.1,.88,.37-.1,.75-.18,1.08-.29,.89-.31,1.78-.53,2.69-.75,2.66-.63,5.38-.94,8.1-1.1,3-.17,5.99,.18,8.9-.7,.43-.13,.76-.67,.38-1.05Z"/><path class="cls-3" d="M84.34,33.75c-2.67-1.23-5.64-2.26-8.58-2.58-3.08-.34-6.32,.06-9.37,.51-3.02,.45-5.84,1.25-8.57,2.63-2.71,1.37-5.07,3.16-7.57,4.85-.04,.03-.02,.1,.03,.08,3.12-1.66,6.06-3.06,9.56-3.75,4.96-.98,10.17-1.54,15.23-1.4,3,.08,5.96,.23,8.94,.52,.44,.04,.76-.65,.31-.86Z"/><path class="cls-2" d="M40.58,19.54c-.44-2.91-1.32-5.5-2.53-8.17-1.21-2.68-2.85-5.17-4.79-7.37-.87-.99-1.94-1.83-2.98-2.63C29.13,.48,27.96,.09,26.53,0c-.52-.03-1,.72-.55,1.1,.89,.76,1.73,1.57,2.64,2.31,1.03,.84,2.13,1.75,2.99,2.76,1.78,2.09,3.12,4.38,4.39,6.8,2.46,4.66,4.73,9.72,5.14,15.04,0,.05,.07,.02,.07-.01,.21-2.8-.2-5.69-.63-8.46Z"/><path class="cls-4" d="M44.52,7.93c-.36-.15-.78,.06-1.01,.34-1.07,1.3-.71,3.18-.64,4.72,.02,.36,.15,.68,.17,1.05,.03,.45,.06,.9,.1,1.35,.08,.8,.15,1.6,.22,2.4,.25,3.35,.32,6.7,.02,10.04,0,.09,.12,.06,.14,0,.78-3.47,1.36-7.02,1.98-10.53,.15-.81,.25-1.62,.33-2.45,.04-.35,.07-.7,.09-1.05,.03-.47,.18-.98,.17-1.45-.05-1.4-.02-3.76-1.57-4.42Z"/><path class="cls-1" d="M49.06,9.78c.12-.19,.23-.41,.32-.62,.04-.16,.07-.32,.11-.49,.23-.86,.51-1.71,.73-2.58,.34-1.33,.68-3.68-1.27-3.85-.35-.03-.76,.23-.88,.56-.41,1.11-.04,2.22,.28,3.32,.29,1.01,.95,2.55,.71,3.66Z"/><path class="cls-3" d="M40.69,30.79c-.11-.79-.16-1.58-.3-2.37-.33-1.85-1.07-3.53-1.85-5.23-.74-1.61-1.73-3.11-2.76-4.55-1.11-1.54-2.22-2.8-3.91-3.72-.45-.24-.81,.45-.64,.79,1.47,3.06,3.95,5.45,5.5,8.48,.74,1.44,1.42,2.91,2.14,4.36,.72,1.45,1.68,2.87,1.93,4.5,.01,.09,.13,.02,.14-.04,.02-.75-.14-1.49-.25-2.23Z"/><path class="cls-1" d="M33.68,11.18c-.61-.78-1.23-1.65-2.31-1.52-.46,.06-.7,.57-.64,.98,.28,1.77,2.93,1.72,3.84,3.01,.02,.03,.07,0,.06-.03-.09-.87-.43-1.75-.96-2.44Z"/><path class="cls-1" d="M31.48,25.67c-.49-.24-.89,.53-.56,.88,1.92,2.11,3.9,4.14,5.61,6.44,.88,1.17,1.68,2.38,2.41,3.65,.75,1.3,1.62,2.5,2.21,3.89,.04,.09,.18,.04,.17-.06-.22-6.11-4.35-12.16-9.84-14.8Z"/><path class="cls-4" d="M35.36,25.6c-.89-2.95-2.82-5.37-5.1-7.37-2.28-2.01-5.44-4.91-8.75-4.01-.56,.15-.97,.77-.67,1.32,.68,1.26,2.11,1.73,3.36,2.24,1.43,.59,2.74,1.54,4.02,2.41,1.24,.84,2.49,1.67,3.72,2.54,1.25,.88,2.41,1.67,3.3,2.95,.04,.06,.15-.01,.12-.08Z"/><path class="cls-2" d="M43.9,33.04c-.07-.39-.63-.22-.74,.05-.44,1.15-.55,2.29-.61,3.51-.03,.6,.03,1.3,.14,1.89,.09,.5,.35,1.29,.26,1.81-.02,.13,.13,.19,.2,.08,.16-.24,.2-.48,.23-.78,.08-.79,.22-1.58,.33-2.37,.19-1.39,.44-2.79,.19-4.19Z"/><path class="cls-3" d="M39.79,40.97c-.26-.5-.49-1.01-.74-1.52-.28-.57-.76-1.06-1.12-1.59-.67-.98-1.36-1.95-2.12-2.87-1.63-1.97-3.58-3.69-5.63-5.21-3.85-2.86-8.54-6.01-13.53-5.89-.38,0-.96,.67-.48,.96,.88,.53,1.79,.9,2.71,1.34,1.11,.52,2.17,1.1,3.29,1.58,2.29,.98,4.48,2.44,6.56,3.81,1.97,1.3,3.94,2.76,5.74,4.29,.9,.76,1.76,1.57,2.66,2.34,1,.87,1.78,1.78,2.59,2.82,.03,.05,.1-.01,.08-.06Z"/><path class="cls-2" d="M28,24.42c-.75-.97-1.79-1.71-2.73-2.47-1.25-1.01-2.51-1.89-3.87-2.74-1.31-.82-2.69-1.59-4.09-2.23-1.43-.65-2.9-1.3-4.49-.86-.4,.11-.9,.8-.41,1.13,1.1,.74,2.38,1.09,3.6,1.57,1.39,.54,2.77,1.13,4.13,1.72,1.36,.59,2.7,1.22,4.01,1.91,1.23,.64,2.62,1.24,3.67,2.16,.09,.08,.25-.08,.18-.17Z"/><path class="cls-2" d="M38.48,41.42c-.45-.83-1.19-1.5-1.96-2.04-1.07-.76-2.3-1.43-3.45-2.07-1.23-.69-2.72-.92-4.06-1.28-.98-.26-2.38-.73-3.32-.23-.39,.21-.77,.89-.3,1.23,.72,.53,1.96,.4,2.82,.62,1.27,.32,2.52,.66,3.78,1.05,1.14,.36,2.23,.68,3.31,1.23,.52,.26,.98,.55,1.53,.76,.52,.2,1.16,.43,1.6,.77,.02,.02,.05-.02,.04-.04Z"/><path class="cls-4" d="M22.54,35.41c-1.54-.27-3.03-.7-4.57-.94-1.57-.24-3.15-.42-4.74-.55-3.07-.26-6.58,0-9.17,1.78-.49,.34-.58,1.43,.21,1.44,1.48,.02,2.8-.51,4.22-.88,1.49-.39,3.04-.7,4.57-.84,1.56-.15,3.15-.15,4.72-.17,1.59-.02,3.16,.17,4.74,.21,.03,0,.05-.05,.01-.06Z"/><path class="cls-2" d="M27.85,33.26c-1.23-.63-2.36-1.44-3.65-1.94-1.36-.53-2.64-1.2-4.01-1.68-1.23-.43-2.54-.65-3.81-.92-1.44-.3-2.75-.52-4.17,0-.39,.14-.63,.92-.12,1.07,1.16,.35,2.35,.44,3.54,.64,1.39,.23,2.78,.49,4.15,.82,2.7,.64,5.36,1.42,8.06,2.06,.03,0,.05-.04,.02-.05Z"/><path class="cls-3" d="M31.07,40.2c-.88-.14-1.75-.43-2.64-.58-1.18-.19-2.34-.47-3.51-.65-2.23-.35-4.47-.61-6.73-.58-4.08,.04-10,.19-12.6,3.93-.37,.54-.33,1.3,.42,1.43,1.93,.32,4.05-.89,5.86-1.39,2.09-.57,4.23-.98,6.37-1.29,2.17-.31,4.35-.58,6.53-.78,1.17-.11,2.36-.17,3.54-.17,.92,0,1.83,.16,2.73,.16,.04,0,.07-.06,.02-.07Z"/><path class="cls-2" d="M30.58,42.22c-1.51-.49-3.27-.61-4.87-.47-2.06,.19-4.26,.92-5.79,2.36-.51,.48-.53,1.54,.4,1.41,1.75-.24,3.4-1.13,5.07-1.66,1.71-.55,3.38-1.3,5.15-1.55,.04,0,.07-.07,.02-.09Z"/><path class="cls-3" d="M27.39,45.78c-2.44,.97-4.87,1.91-7.2,3.12-2.52,1.31-4.92,3.04-7.01,4.94-2.03,1.84-3.87,4.09-5.21,6.47-.67,1.18-1.21,2.44-1.63,3.73-.37,1.15-.87,2.84-.47,4.02,.25,.73,1.13,.88,1.69,.39,.87-.75,1.49-2.02,1.93-3.08,.46-1.1,.89-2.2,1.41-3.27,1.06-2.22,2.61-4.26,4.14-6.17,3.39-4.2,7.75-7.36,12.36-10.11,.03-.01,.02-.06-.01-.05Z"/><path class="cls-2" d="M37.81,46.6c-3.84,2.64-7.26,6.23-10.08,9.93-1.55,2.03-2.63,4.5-3.69,6.82-.96,2.12-1.76,4.75-1.53,7.11,.06,.61,.77,.72,1.12,.25,1.3-1.74,2.19-4,3.02-6,.93-2.25,1.96-4.47,3.12-6.62,1.05-1.95,2.33-3.8,3.51-5.68,1.31-2.1,2.78-4.05,4.57-5.75,.04-.03,0-.09-.03-.05Z"/><path class="cls-4" d="M27.05,52.59c-2.43,1.68-4.87,3.31-6.88,5.48-2.15,2.31-4,5.05-4.71,8.15-.31,1.34,1.39,1.39,1.91,.41,1.33-2.54,2.62-5.04,4.17-7.45,1.57-2.43,3.4-4.59,5.57-6.51,.05-.05,.01-.13-.05-.08Z"/><path class="cls-2" d="M20.86,65.51c-.89,1.43-1.97,2.81-2.51,4.42-.65,1.9-.95,3.72-.98,5.72-.01,.9,1.17,.56,1.34-.09,.82-3.34,1.27-6.72,2.22-10.03,.01-.05-.05-.04-.06-.01Z"/><path class="cls-1" d="M36.37,44.86c-4.87,.95-11.2,2.01-13.73,6.92-.28,.54,.2,1.07,.75,.83,1.13-.48,2.01-1.24,2.94-2.02,.94-.79,1.95-1.54,2.96-2.26,2.21-1.56,4.59-2.41,7.09-3.37,.05-.02,.05-.12-.01-.1Z"/><path class="cls-2" d="M15.83,48.94c-2.67,.55-5.34,1.43-7.61,2.97-1.26,.85-2.33,1.85-3.34,2.98-.87,.96-1.81,2.3-1.7,3.66,.05,.57,.53,.81,1.04,.61,1.08-.42,1.87-1.41,2.58-2.28,.85-1.04,1.72-2.01,2.71-2.93,2.01-1.87,3.84-3.69,6.32-4.95,.02-.01,.03-.06,0-.05Z"/><path class="cls-3" d="M41.33,48.69c0-.1-.13-.08-.16-.01-1.58,3.86-3.15,7.84-2.94,12.08,.05,1.16,1.47,.73,1.71-.12,1.07-3.86,1.42-7.96,1.39-11.96Z"/><path class="cls-2" d="M43.5,45.48c0-.05-.08-.04-.09,0-.23,1.6-.57,3.16-.71,4.78-.15,1.77-.4,3.53-.49,5.31-.18,3.55-.72,7.33-.11,10.86,.12,.73,1.07,.23,1.19-.24,.43-1.7,.51-3.56,.61-5.3,.09-1.78,.21-3.56,.22-5.35,0-3.34-.23-6.74-.62-10.07Z"/><path class="cls-4" d="M37.62,53.5c-1.27,2.48-2.77,4.77-3.81,7.37-.51,1.27-.89,2.58-1.25,3.9-.37,1.35-.42,2.67-.46,4.07-.02,.93,1.22,.77,1.51,.11,1.09-2.47,1.51-5.06,2.23-7.64,.37-1.34,.54-2.73,.84-4.1,.28-1.25,.7-2.46,.99-3.7,0-.03-.03-.04-.05-.01Z"/><path class="cls-1" d="M28.18,66.19c-.24,.44-.47,.88-.69,1.33-.99,2.04-2.36,4.92-1.57,7.22,.22,.64,1.01,.57,1.37,.1,1.55-1.97,1.73-4.85,2.41-7.21,.34-1.18,.65-2.38,.97-3.57,.17-.62,.54-1.37,.71-2.09-1.01,1.4-2.15,2.78-3.2,4.2Z"/><path class="cls-2" d="M39.19,71.09c-.03-1.78-.12-3.55-.2-5.33,0-.12-.15-.07-.17,.01-1.05,3.59-2.29,7.43-1.69,11.2,.16,1.02,1.5,.3,1.66-.33,.48-1.85,.43-3.66,.4-5.55Z"/><path class="cls-1" d="M41.14,45.2c-1.09,1.07-2.35,1.85-3.35,3.02-.98,1.13-1.81,2.43-2.21,3.87-.15,.53,.56,.72,.83,.32,.76-1.1,1.34-2.3,2.03-3.45,.8-1.33,1.93-2.4,2.77-3.7,.04-.06-.02-.11-.07-.06Z"/><path class="cls-1" d="M14.64,45.37c-1.71,.09-3.45,.64-5.05,1.21-2.01,.71-3.88,1.67-5.19,3.39-.4,.53-.2,1.36,.57,1.25,1.86-.26,3.28-1.59,4.74-2.66,1.52-1.12,3.15-2.41,4.93-3.08,.04-.01,.06-.11,0-.1Z"/><path class="cls-2" d="M51.86,59.85c-.55-1.9-1.15-3.81-1.82-5.68-.67-1.86-1.47-3.63-2.44-5.35-.44-.78-1.05-1.55-1.63-2.24-.26-.31-.49-.65-.74-.96-.24-.29-.64-.51-.8-.86-.02-.04-.07,0-.06,.04,.04,.21,.14,.34,.26,.53,.28,.42,.47,.87,.65,1.34,.34,.86,.6,1.75,.88,2.63,.61,1.93,1.4,3.81,2.02,5.74,.57,1.79,1.12,3.59,1.68,5.37,.58,1.83,1,3.66,1.73,5.45,.23,.55,.93,.18,.94-.31,.03-1.99-.12-3.79-.67-5.7Z"/><path class="cls-2" d="M60.07,69.16c-.66-1.75-1.38-3.44-2.21-5.12-.75-1.53-1.54-3.1-2.42-4.56-.45-.75-.97-1.46-1.51-2.16,.57,1.88,.87,3.87,1.38,5.77,.18,.6,.35,1.2,.54,1.79,.55,1.69,1.18,3.36,1.78,5.04,.56,1.57,1.03,3.15,2.14,4.43,.28,.33,.87,.14,.92-.31,.22-1.79,0-3.19-.62-4.87Z"/><path class="cls-3" d="M48.18,84.74c.42,.58,1,1.01,1.61,.28,.19-.23,.35-.48,.48-.75,.35-1.78,.22-3.76,.16-5.47-.12-3.27-.22-6.54-.74-9.77-.5-3.14-1.68-5.97-2.68-8.96,.44,1.34,.11,3.41,.11,4.82,0,1.68-.03,3.37-.04,5.05-.02,3.14,.1,6.29,.41,9.42,.13,1.28,.21,2.57,.3,3.86,.04,.57,.21,1.06,.39,1.54Z"/><path class="cls-2" d="M63.69,66.2c-.5-2.3-1.32-4.36-2.67-6.29-1.27-1.82-2.57-3.61-3.9-5.39-1.41-1.87-2.99-3.56-4.7-5.16-1.63-1.52-3.55-3.01-5.66-3.79-.03-.01-.08,.04-.04,.06,1.83,1.21,3.17,3.19,4.51,4.9,1.47,1.87,2.79,3.86,4.2,5.78,1.18,1.6,2.32,3.22,3.46,4.85,1.3,1.86,2.36,3.87,3.71,5.71,.43,.59,1.22-.1,1.09-.68Z"/><path class="cls-3" d="M72.45,70.7c-.57-2.21-1.24-4.28-2.41-6.25-1.67-2.85-3.69-5.53-6-7.9-2.27-2.32-4.65-3.72-7.42-5.29-.05-.03-.1,.06-.06,.09,.62,.67,1.37,1.2,1.98,1.89,3.45,3.95,6.65,8.4,9.39,12.86,1.15,1.86,2.26,3.59,3.78,5.18,.33,.34,.82-.24,.74-.58Z"/><path class="cls-2" d="M82.65,43.29c-2.18-1.95-4.8-2.87-7.63-3.49-6.01-1.3-11.44-1.67-17.52-.58-2.77,.49-5.65,1.29-8.18,2.56-.04,.02-.03,.08,.02,.06,5.36-1.87,11.24-1.53,16.75-.7,2.65,.4,5.28,.9,7.89,1.5,2.72,.62,5.27,1.57,8.06,1.86,.6,.06,1.07-.8,.6-1.22Z"/><path class="cls-2" d="M85.91,52.75c-.13-1.69-1.69-2.49-3.02-3.26-1.69-.97-3.49-1.75-5.3-2.43-1.7-.64-3.49-1.19-5.26-1.62-1.79-.44-3.6-.92-5.41-1.25-.03,0-.05,.04-.02,.05,3.3,1.12,6.54,2.55,9.61,4.2,1.43,.76,2.89,1.52,4.22,2.45,.46,.32,5.38,4.27,5.18,1.86Z"/><path class="cls-1" d="M75.37,52.14c-3.29-3.35-7.74-5.58-12.13-7.1-2.17-.76-4.39-1.2-6.64-1.66-1.15-.23-2.28-.34-3.45-.37-.72-.02-1.58-.05-2.25,.23-.04,.02-.04,.09,.01,.08,.93-.15,2.01,.3,2.89,.57,1.02,.32,2.02,.63,3.02,1.04,2.02,.83,4.09,1.51,6.09,2.4,4.02,1.8,7.99,3.74,12.05,5.45,.35,.15,.66-.38,.41-.64Z"/><path class="cls-3" d="M75.22,59.61c-.89-2.21-3.03-3.62-4.88-5.01-1.78-1.34-3.66-2.6-5.61-3.68-3.97-2.21-8.49-4.51-13.05-5.14-.03,0-.05,.04-.02,.05,2.01,.79,3.82,2.12,5.72,3.14,2.01,1.08,3.95,2.27,5.94,3.4,1.89,1.08,3.72,2.32,5.45,3.65,.94,.72,1.91,1.41,2.8,2.2,.96,.83,1.73,1.64,2.94,2.11,.37,.14,.87-.33,.71-.71Z"/><path class="cls-1" d="M85.14,67.52c.09-.85-.88-2.67-1.06-3.03-.99-2.01-2.26-3.83-3.77-5.49-2.06-2.27-4.89-4.52-7.96-5.16-.04-.01-.09,.07-.05,.1,1.69,1.12,2.8,2.92,4.08,4.45,1.73,2.07,3.56,4.05,5.17,6.22,.58,.79,2.1,3.47,3.23,3.33,.23-.03,.34-.19,.37-.42Z"/><path class="cls-2" d="M76.33,67.61c-.98-1.35-2.04-2.63-3.18-3.84-1.13-1.2-2.39-2.16-3.67-3.19-.05-.04-.14,.05-.09,.09,.99,1.16,1.99,2.25,2.85,3.52,.91,1.36,1.74,2.78,2.51,4.22,1.51,2.81,2.86,5.7,4.56,8.39,.37,.58,1.24,0,1.19-.56-.26-3.19-2.35-6.11-4.17-8.63Z"/><path class="cls-4" d="M43.21,76.16c-.11-.78-.27-1.51-.47-2.27-.16-.61-.19-1.25-.37-1.85-.05-.18-.29-.05-.29,.1,0,.65-.23,1.32-.36,1.96-.15,.8-.19,1.62-.3,2.43-.2,1.43-.36,2.91,.24,4.25,.26,.58,1.16,.17,1.33-.27,.55-1.42,.44-2.86,.23-4.35Z"/><path class="cls-1" d="M89.85,41.24c-.23-2.27-3.09-3.13-4.95-3.6-1.22-.3-2.51-.46-3.75-.56-1.14-.09-2.32-.23-3.47-.05-.06,.01-.11,.12-.03,.14,2,.58,3.95,1.68,5.86,2.54,.94,.42,1.86,.84,2.75,1.37,.82,.5,1.74,1.08,2.74,1.02,.43-.03,.91-.37,.86-.86Z"/><path class="cls-2" d="M67.45,29c-.84-.16-1.66-.13-2.47,.02-1.32,.39-2.58,.92-3.66,1.73,1.98-.52,4.08-.29,6.04-.89,.4-.12,.63-.76,.09-.86Z"/></g></g></svg>';
  } else if (iconType === "cross") {
    return '<svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M18 6L6 18M6 6l12 12" stroke="#FF0000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
  }
}


function resetGame() {
  currentIndex = 0;
  correctSequence = true;
  setTimeout(() => {
    document.querySelectorAll(".key").forEach(key => {
      key.classList.remove("correct");
      key.dataset.count = 0;
      key.innerHTML = key.dataset.key;
    });

    // Nur das grüne Checkmark entfernen, wenn es das Ende der Sequenz ist
    if (currentIndex === 0) {
      document.getElementById("message").innerHTML = "";
    }
  }, 1000);
}

function generateKeyboard() {
  const keyboardLayout = [
    "123456789",
    "QWERTZUIOP",
    "ASDFGHJKL",
    "YXCVBNM"
  ];

  let keyboardHTML = "";

  for (let row of keyboardLayout) {
    for (let char of row) {
      if (char === " ") {
        keyboardHTML += `<div class="key empty"></div>`;
      } else {
        keyboardHTML += `<button class="key" data-key="${char}">${char}</button>`;
      }
    }
    keyboardHTML += "<br/>";
  }

  return keyboardHTML;
}
